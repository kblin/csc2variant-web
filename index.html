<!doctype html>
<html lang="en">
  <head>
    <title>csc2variants</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link type="text/css" rel="stylesheet" href="fonts/roboto.css">
    <link type="text/css" rel="stylesheet" href="fonts/material-icons.css">
    <link type="text/css" rel="stylesheet" href="css/material.min.css">
    <link type="text/css" rel="stylesheet" href="css/style.css">

  </head>
  <body class="mdl-base">
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header mdl-layout__header--scroll mdl-color--primary">
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
        </div>
        <div class="mdl-layout__header-row">
          <h3>covid-spike-classification based variant calling</h3>
        </div>
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
        </div>
        <div class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--primary-dark">
          <a href="#analyse" class="mdl-layout__tab is-active">Analyse</a>
          <a href="#about" class="mdl-layout__tab">About</a>
        </div>
      </header>

      <main class="mdl-layout__content">
        <div class="mdl-layout__tab-panel is-active" id="analyse">
            <section id="input" class="section--center">
              <div class="mdl-grid">
                <div class="mdl-cell mdl-cell--12-col">
                  Paste the output from <code>covid-spike-classification</code>
                </div>
              </div>
              <div class="mdl-grid">
                <div class="mdl-cell mdl-cell--12-col">
                  <div class="mdl-textfield mdl-js-textfield extrawide">
                  <textarea id="csc-input" class="mdl-textfield__input" rows="10" placeholder="covid-spike-classification output"></textarea>
                  <label class="mdl-textfield__label" for="csc-input">Mutation calls from <code>covid-spike-classification</code></label>
                  </div>
                </div>
              </div>
              <div class="mdl-grid">
                <div class="mdl-cell mdl-cell--5-col"></div>
                <div class="mdl-cell mdl-cell--3-col">
                <button id="run-button" class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent">
                  <i class="material-icons">fingerprint</i>Call variants
                </button>
                </div>
              </div>
            </section>

            <section id="running" class="section--center hidden">
              <div class="mdl-grid">
                <div class="mdl-vell mdl-cell--4-col">
                  Calling variants...
                </div>
                <div class="mdl-cell mdl-cell--4-col">
                  <div id="progress" class="mdl-progress mdl-js-progress"></div>
                </div>
              </div>
            </section>

            <section id="output" class="section--center hidden">
              <div class="mdl-grid">
                <div class="mdl-col mdl-col--12-col">
                  Variants detected
                </div>
              </div>
              <div class="mdl-grid">
                <div class="mdl-cell mdl-cell--12-col">
                  <table class="mdl-data-table mdl-js-data-table">
                    <thead>
                      <tr>
                        <th class="mdl-data-table__cell--non-numeric">Sample</th>
                        <th class="mdl-data-table__cell--non-numeric">Mutations</th>
                        <th class="mdl-data-table__cell--non-numeric">Variants</th>
                      </tr>
                    </thead>
                    <tbody id="variant-calls">
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="mdl-grid">
                <div class="mdl-col mdl-col--5-col"></div>
                <div class="mdl-col mdl-col--7-col">
                  <button id="reset-button" class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent">
                    <i class="material-icons">autorenew</i>Run again
                  </button>
                </div>
              </div>
            </section>
        </div>
        <div class="mdl-layout__tab-panel" id="about">
          <section id="input" class="section--center">
            <div class="mdl-grid">
              <div class="mdl-col mdl-col--1-col"></div>
              <div class="mdl-col mdl-col--10-col">
                <h3>About</h3>
                <p>
                This website provides SARS-CoV-2 variant calls, based on the output of
                <a href="https://github.com/kblin/covid-spike-classification/"><code>covid-spike-classification</code></a> and
                powered by <a href="https://outbreak.info/">outbreak.info</a>. The input is processed locally in your browser.
                The detected mutations are then sent to <a href="https://outbreak.info/">outbreak.info</a>, which provides the variants and frequencies.
                <strong>Note:</strong> Sample IDs contained in our input data are not submitted to a third party.
                </p>
              </div>
            </div>
            <div class="mdl-grid">
              <div class="mdl-col mdl-col--1-col"></div>
              <div class="mdl-col mdl-col--10-col">
                <h3>Citations</h3>
                <p>
                For <a href="https://github.com/kblin/covid-spike-classification/"><code>covid-spike-classification</code></a>, please cite:<br>
                A rapid, cost efficient and simple method to identify current SARS-CoV-2 variants of concern by Sanger sequencing part of the spike protein gene<br>
                Tue Sparholt J&oslash;rgensen, Kai Blin, Franziska Kuntke, Henrik K. Salling, Thomas Y Michaelsen, Mads Albertsen, Helene Larsen<br>
                medRxiv 2021.03.27.21252266; doi: <a href="https://doi.org/10.1101/2021.03.27.21252266">https://doi.org/10.1101/2021.03.27.21252266</a>.
                </p>
                <p>
                For <a href="https://outbreak.info/">outbreak.info</a>, please cite:<br>
                Julia L. Mullen, Ginger Tsueng, Alaa Abdel Latif, Manar Alkuzweny, Marco Cano, Emily Haag, Jerry Zhou, Mark Zeller, Nate Matteson, Kristian G. Andersen, Chunlei Wu, Andrew I. Su, Karthik Gangavarapu, Laura D. Hughes, and the Center for Viral Systems Biology <em>outbreak.info</em>. Available online: <a href="https://outbreak.info/">https://outbreak.info/</a> (2020)
                </p>
              </div>
            </div>
          </section>
        </div>
      </main>

      <footer class="mdl-mini-footer">
        <div class="mdl-mini-footer__left-section">
          <div class="mdl-logo">Â© 2021 Technical University of Denmark</div>
        </div>
        <div class="mdl-mini-footer__right-section">
          <ul class="mdl-mini-footer__link-list">
            <li>Powered by <a href="https://outbreak.info/">outbreak.info</a></li>
            <li><a href="about.html">About</a></li>
          </ul>
        </div>
      </footer>
    </div>

    <template id="variant-row">
      <tr class="is-link">
        <td class="mdl-data-table__cell--non-numeric"></td>
        <td class="mdl-data-table__cell--non-numeric"></td>
        <td class="mdl-data-table__cell--non-numeric"></td>
      </tr>
    </template>

    <script src="js/papaparse.js"></script>
    <script type="text/javascript" src="js/material.min.js"></script>
    <script src="js/run.js"></script>
  </body>
</html>
